var AtomicPackages;!function(t){var e=function(){function t(t){}return t.search=function(t,e){var i=Object.keys(e)[0];return console.log(t),console.log(e),t.filter(function(t){return t[i]==e[i]})},t.checkType=function(t){switch(typeof t){case"number":return{id:t};case"string":return/^#/.test(t)?{idName:t.substr(1)}:{className:t.substr(1)}}},t}();t.AtomicPackageModel=e}(AtomicPackages||(AtomicPackages={}));var AtomicPackageView;!function(t){var e=function(){function t(t){this.node=t,this._OPEN_CLASS_NAME="open"}return t.fromData=function(e){return new t(e?e:null)},t.prototype.open=function(){this.node.classList.add(this._OPEN_CLASS_NAME)},t.prototype.close=function(){this.node.classList.contains(this._OPEN_CLASS_NAME)&&this.node.classList.remove(this._OPEN_CLASS_NAME)},t.prototype.addIdName=function(t){this.node.id=t},t.prototype.destroy=function(){var t=document.getElementById(this.node.id);t.parentNode.removeChild(t)},t.prototype.createElement=function(){},t}();t.ModalWindow=e;var i=function(){function t(){this._BACKDROP_ELEMENT_CLASS_NAME="modalWindowBackDrop",this._SHOW_CLASS_NAME="show",this.createElement()}return t.prototype.createElement=function(){this.node=document.createElement("div"),this.node.classList.add(this._BACKDROP_ELEMENT_CLASS_NAME),document.body.appendChild(this.node)},t.prototype.show=function(){this.node.classList.add(this._SHOW_CLASS_NAME)},t.prototype.hide=function(){this.node.classList.contains(this._SHOW_CLASS_NAME)&&this.node.classList.remove(this._SHOW_CLASS_NAME)},t}();t.ModalWindowBackDrop=i;var o=function(){function t(t,e){this.node=t,this.target=e,this.callBackFunction=function(){},this.setEventListener()}return t.fromData=function(e){return new t(e?e:null,e.dataset.apModal?e.dataset.apModal:e.hash)},t.prototype.setEventListener=function(){var t=this;this.node.addEventListener("click",function(e){e.preventDefault(),t.open(t.callBackFunction)},!1)},t.prototype.open=function(t,e){this.callBackFunction=t,e||t(this.target)},t}();t.ModalWindowTrigger=o}(AtomicPackageView||(AtomicPackageView={}));var AtomicPackages;!function(t){var e=function(){function t(t){}return t}();t.AtomicPackageView=e}(AtomicPackages||(AtomicPackages={}));var AtomicPackageModel;!function(t){var e=function(){function t(t,e,i,o,n){this.id=t,this.className=e,this.idName=i,this.isOpen=o,this.view=n,this.addIdName()}return t.fromData=function(e){return new t(e.id?e.id:1,e.className?e.className:"",e.idName?e.idName:"",e.isOpen?e.isOpen:!1,e.view?e.view:null)},t.prototype.addIdName=function(){this.view.addIdName(this.idName)},t.prototype.open=function(){this.isOpen=!0,this.view.open()},t.prototype.close=function(){this.isOpen=!1,this.view.close()},t.prototype.destroy=function(){this.view.destroy()},t}();t.ModalWindow=e;var i=function(){function t(t,e){this.isShow=t,this.view=e}return t.fromData=function(e){return new t(e.isShow?e.isShow:!1,e.view?e.view:null)},t.prototype.show=function(){this.isShow=!0,this.view.show()},t.prototype.hide=function(){this.isShow=!1,this.view.hide()},t}();t.ModalWindowBackDrop=i;var o=function(){function t(t){this.view=t}return t.fromData=function(e){return new t(e.view?e.view:null)},t.prototype.open=function(){},t}();t.ModalWindowTrigger=o}(AtomicPackageModel||(AtomicPackageModel={}));var Controller;!function(t){var e=AtomicPackages.AtomicPackageModel,i=AtomicPackageModel.ModalWindow,o=AtomicPackageView.ModalWindow,n=AtomicPackageModel.ModalWindowBackDrop,a=AtomicPackageView.ModalWindowBackDrop,r=AtomicPackageModel.ModalWindowTrigger,c=AtomicPackageView.ModalWindowTrigger,s=function(){function t(){var t=this;this._created_modal_window_num=0,this.list=[],this.backDrop=null,this.triggerList=[],this._DEFAULT_ID_NAME="modalWindow",this._DEFAULT_CLASS_NAME="modalWindow",document.addEventListener("DOMContentLoaded",function(){t.createFromElement(document.querySelectorAll("."+t._DEFAULT_CLASS_NAME)),t.createTriggerFromElement(document.querySelectorAll("[data-ap-modal]")),console.log(t)})}return t.prototype.createId=function(){return++this._created_modal_window_num},t.prototype.createFromElement=function(t){for(var e=0;e<t.length;e++)this.create({className:t[e].className,idName:t[e].id?t[e].id:null,view:o.fromData(t[e])});t.length>0&&null===this.backDrop&&(this.backDrop=n.fromData({view:new a}))},t.prototype.createTriggerFromElement=function(t){for(var e=0;e<t.length;e++)this.triggerList.push(r.fromData({targetClassName:"",targetIdName:"",targetId:0,view:c.fromData(t[e])}));this.setTriggerCallBack(),console.log(this.triggerList)},t.prototype.setTriggerCallBack=function(){var t=this;this.triggerList.forEach(function(e){e.view.open(function(e){t.open(e)},!0)})},t.prototype.matchModal=function(t){var e=[];return this.list.forEach(function(i){t.forEach(function(t){i==t&&e.push(i)})}),e},t.prototype.openCheck=function(){var t=!1;return this.list.forEach(function(e){e.isOpen&&(t=!0)}),t},t.prototype.open=function(t){var i=e.search(this.list,e.checkType(t));if(i.length>0){var o=this.matchModal(i);o.forEach(function(t){t.open()}),this.backDrop.show()}},t.prototype.close=function(t){var i=e.search(this.list,e.checkType(t));if(i.length>0){var o=this.matchModal(i);o.forEach(function(t){t.close()})}this.openCheck()||this.backDrop.hide()},t.prototype.create=function(t){if(void 0!==t){var e=this.createId();this.list.push(i.fromData({id:e,className:t.className?t.className:this._DEFAULT_CLASS_NAME,idName:t.idName?t.idName:String(this._DEFAULT_ID_NAME+e),view:t.view}))}else{var e=this.createId();this.list.push(i.fromData({id:this.createId(),className:this._DEFAULT_CLASS_NAME,idName:String(this._DEFAULT_ID_NAME+e),view:null}))}},t.prototype.destroy=function(t){var i=e.search(this.list,e.checkType(t)),o=[];i.length>0&&(this.list.forEach(function(t){i.forEach(function(e){t!==e?o.push(t):t.destroy()})}),this.list=o)},t.prototype.update=function(){},t.prototype.getElement=function(){},t}();t.ModalWindow=s}(Controller||(Controller={}));var Controller;!function(t){var e=function(){function t(){}return t}();t.Button=e}(Controller||(Controller={}));var AtomicPackages;!function(t){var e=Controller.ModalWindow,i=Controller.Button,o=function(){function o(){this.model=new t.AtomicPackageModel(this),this.view=new t.AtomicPackageView(this),this.modal=new e,this.btn=new i}return o}();t.AtomicPackageController=o}(AtomicPackages||(AtomicPackages={}));var e=eval,global=e("this"),AtomicPackages;!function(t){var e=function(){function e(i){if(e._instance)return e._instance;var o=new t.AtomicPackageController;this.modal=o.modal,this.btn=o.btn,e._instance=this}return e._instance=null,e}();t.AtomicPackage=e}(AtomicPackages||(AtomicPackages={})),"undefined"!=typeof module&&"undefined"==typeof module.exports.AP&&(module.exports.AP=new AtomicPackages.AtomicPackage),"undefined"!=typeof global&&"undefined"==typeof global.AP&&(global.AP=new AtomicPackages.AtomicPackage({}));var AtomicPackages;!function(t){var e=function(){function t(){this._FAKE_ELEMENT="fakeelement",this.support={touch:"ontouchstart"in window},this.vendor={defaultEvent:"click",transitionend:this.whichTransitionEvent(),animationend:this.whichAnimationEvent(),prefix:this.whichPrefix(),transform:this.whichTransform()},this.support.touch&&(this.vendor.defaultEvent="touchend")}return t.prototype.createFakeElement=function(){return document.createElement(this._FAKE_ELEMENT)},t.prototype.whichPrefix=function(){return/webkit/i.test(navigator.appVersion)?"-webkit-":/firefox/i.test(navigator.userAgent)?"-moz-":/trident/i.test(navigator.userAgent)?"-ms-":"opera"in window?"-o-":""},t.prototype.whichTransform=function(){var t,e=this.createFakeElement(),i={transform:"transform",OTransform:"OTransform",MozTransform:"MozTransform",webkitTransform:"webkitTransform"};for(t in i)if(void 0!==e.style[t])return i[t]},t.prototype.whichAnimationEvent=function(){var t,e=this.createFakeElement(),i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(t in i)if(void 0!==e.style[t])return i[t]},t.prototype.whichTransitionEvent=function(){var t,e=this.createFakeElement(),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in i)if(void 0!==e.style[t])return i[t]},t}();t.Utility=e}(AtomicPackages||(AtomicPackages={}));var Model;!function(t){var e=function(){function t(){}return t}();t.Button=e}(Model||(Model={}));var AtomicPackageView;!function(t){var e=function(){function t(){}return t}();t.Button=e}(AtomicPackageView||(AtomicPackageView={}));